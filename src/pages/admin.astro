---
import AdminLayout from "../layout/AdminLayout.astro";
import LoginModal from "../component/LoginModal.astro";
import Editor from "../component/Editor.astro";
import "../style/markdown.css";
import { supabase } from "../lib/supabase";

const {
  data: { user },
} = await supabase.auth.getUser();

// Load saved draft data from localStorage on the server side
const savedTitle = ""; // This would need client-side JS to load from localStorage
const savedContent = "";
const savedTags: string[] = [];
---

<AdminLayout title="Admin">
  <LoginModal isVisible={!user} />
  <Editor
    savedTitle={savedTitle}
    savedContent={savedContent}
    savedTags={savedTags}
  />
</AdminLayout>
